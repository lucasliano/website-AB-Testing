{# templates/partials/detail_header.html #}
<section class="mt-4">
  <div class="grid grid-cols-1 lg:grid-cols-[minmax(0,2fr)_minmax(0,1.3fr)] gap-10 mt-6">

    <!-- COLUMNA IZQUIERDA: VOLVER + TÍTULO + SHORT DESCRIPTION + STATUS -->
    <div>
      <a
        href="{{ url_for('home') }}"
        class="inline-flex items-center gap-1 rounded-full border border-slate-700/70 bg-slate-900/60 px-3 py-1 text-xs text-slate-200 hover:bg-slate-800 transition"
        data-event-name="click_volver_detail-header"
      >
        ← Volver
      </a>

      <h1 class="mt-4 text-4xl md:text-5xl font-extrabold text-white">
        {{ initiative.title }}
      </h1>

      {% if initiative.short_description %}
        <div class="mt-3 max-w-xl">
          <p class="text-xs font-semibold uppercase tracking-wide text-slate-400">
            Objetivo general
          </p>
          <p class="mt-1 text-base md:text-lg text-slate-300">
            {{ initiative.short_description }}
          </p>
        </div>
      {% endif %}

      {# ---------------------------- #}
      {# STATUS BADGE (mismo color) #}
      {# ---------------------------- #}
      {% if initiative.status == "Proyecto en Curso" %}
        {% set status_classes = "bg-amber-400/90 text-slate-950" %}
      {% elif initiative.status == "Nuevo Proyecto" %}
        {% set status_classes = "bg-pink-500 text-slate-950" %}
      {% elif initiative.status == "Nueva Linea de Trabajo" %}
        {% set status_classes = "bg-lime-300 text-slate-900" %}
      {% endif %}
        <span
          class="inline-flex mt-4 items-center rounded-full px-4 py-1 text-xs font-semibold {{ status_classes }} "
        >
          {{ initiative.status }}
        </span>
    </div>

    <!-- COLUMNA DERECHA: RESUMEN -->
    <aside
      class="bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-800 rounded-3xl p-6 shadow-[0_20px_60px_rgba(0,0,0,0.7)]"
    >
      <h2 class="text-sm font-semibold text-slate-100 mb-4 border-b border-slate-700/80 pb-2 uppercase tracking-wide">
        Resumen
      </h2>

      <dl class="space-y-4 text-sm">

        <!-- RESPONSABLE -->
        <div>
          <dt class="text-xs font-semibold text-slate-100 uppercase tracking-wide">
            Responsable
          </dt>
          <dd class="mt-1 text-sm text-slate-300">
            {% if initiative.responsable %}
              {% if initiative.responsable is string %}
                <p>{{ initiative.responsable }}</p>
              {% else %}
                <ul class="space-y-1">
                  {% for r in initiative.responsable %}
                    <li>• {{ r }}</li>
                  {% endfor %}
                </ul>
              {% endif %}
            {% else %}
              <span class="text-slate-500">No definido</span>
            {% endif %}
          </dd>
        </div>

        <!-- CORREO DE CONTACTO -->
        <div>
          <dt class="text-xs font-semibold text-slate-100 uppercase tracking-wide">
            Correo de contacto
          </dt>
          <dd class="mt-1 text-sm text-slate-300">
            {% if initiative.contact_email %}
              {% if initiative.contact_email is string %}
                <a
                  href="mailto:{{ initiative.contact_email }}"
                  class="text-sky-400 hover:text-sky-300 break-all"
                >
                  {{ initiative.contact_email }}
                </a>
              {% else %}
                <ul class="space-y-1">
                  {% for email in initiative.contact_email %}
                    <li>
                      <a
                        href="mailto:{{ email }}"
                        class="text-sky-400 hover:text-sky-300 break-all"
                      >
                        {{ email }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            {% else %}
              <span class="text-slate-500">No informado</span>
            {% endif %}
          </dd>
        </div>

        <!-- CATEGORÍAS -->
        <div>
          <dt class="text-xs font-semibold text-slate-100 uppercase tracking-wide">
            Categorías
          </dt>
          <dd class="mt-1">
            <div class="flex flex-wrap gap-2">
              {% if initiative.categories %}
                {% for category in initiative.categories %}
                  <span class="inline-flex items-center rounded-full border border-slate-700/80 bg-slate-950/60 px-3 py-1 text-xs font-medium text-slate-200">
                    {{ category }}
                  </span>
                {% endfor %}
              {% else %}
                <span class="text-slate-500">Sin categorías</span>
              {% endif %}
            </div>
          </dd>
        </div>

        <!-- Vacantes Disponibles -->
        <div>
          <dt class="text-xs font-semibold text-slate-100 uppercase tracking-wide">
            Vacantes Disponibles: <span class="mt-1 text-sm text-slate-300">{{ initiative.looking_for }}</span>
          </dt>
        </div>
      </dl>

      {% if initiative.contact_email %}
        <button
          type="button"
          class="mt-6 inline-flex w-full items-center justify-center rounded-full bg-gradient-to-r from-sky-500 to-blue-600 text-sm font-semibold text-white py-2.5 shadow-lg hover:from-sky-400 hover:to-blue-500 hover:scale-[1.01] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950 transition"
          data-event-name="click_contactar_resumen-detalle"
          data-initiative-contact="{{ initiative.id }}"
          data-modal-open="contact-form"
        >
          Contactar responsable
        </button>
      {% endif %}
    </aside>
  </div>

  {% include jinja_load_variant_template("partials/contact_form.html", current_variant) %}
</section>
